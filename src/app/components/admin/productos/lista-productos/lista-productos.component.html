<div class="container py-3 py-md-4">

    

    <div class="d-flex justify-content-between align-content-center mb-2 mb-md-3">
        <p class="h3 mb-0">Productos</p>
        <div>
            <button class="btn btn-primary" (click)="openModalCrear()">
                <mat-icon>add</mat-icon> Crear</button>
        </div>
    </div>

        <div class="">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Buscar</mat-label>
                <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Ingresa una palabra">
            </mat-form-field>
        </div>
    



    <div class="table-responsive">

        <table mat-table [dataSource]="productsData" matSort class="example-table" [trackBy]="trackByPublicado">

            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Código</th>
                <td mat-cell *matCellDef="let producto"> {{ producto.id }} </td>
            </ng-container>

            <ng-container matColumnDef="fechaCreacion">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha creación</th>
                <td mat-cell *matCellDef="let producto"> {{ producto.fechaCreacion.toDate() | date: 'short' }} </td>
            </ng-container>

            <ng-container matColumnDef="autorNombre">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Autor Nombre</th>
                <td mat-cell *matCellDef="let producto"> {{ producto.autorNombre }} </td>
            </ng-container>

            <ng-container matColumnDef="departamento">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Ubicación</th>
                <td mat-cell *matCellDef="let producto"> {{ producto.departamento }} </td>
            </ng-container>

            <ng-container matColumnDef="categoria">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Categoria</th>
                <td mat-cell *matCellDef="let producto"> {{ producto.categoria}} </td>
            </ng-container>

            <ng-container matColumnDef="imagen">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Imagen</th>
                <td mat-cell *matCellDef="let producto"> <img class="imageProductAdmin border my-2 rounded-lg" [src]="producto.image"></td>
            </ng-container>

            <ng-container matColumnDef="nombre">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre</th>
                <td mat-cell *matCellDef="let producto"> {{ producto.nombre }} </td>
            </ng-container>

            <ng-container matColumnDef="descripcion">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Descripcion</th>
                <td mat-cell *matCellDef="let producto"> {{producto.descripcion | slice: 0:64}}...</td>
            </ng-container>

            <ng-container matColumnDef="publicado">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Publicado</th>
                <td mat-cell *matCellDef="let producto">
                    <mat-slide-toggle color="primary" #toggle [ngModel]="producto.publicado" (ngModelChange)="actualizarPublicado(producto.id, producto, $event)">
                    </mat-slide-toggle>
                </td>
            </ng-container>

            <ng-container matColumnDef="destacado">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Destacado</th>
                <td mat-cell *matCellDef="let producto">
                    <!-- <mat-slide-toggle color="primary" #toggle [ngModel]="producto.publicado" (ngModelChange)="actualizarPublicado(producto.id, producto, $event)">
                  </mat-slide-toggle> -->
                    <mat-checkbox #toggle2 [ngModel]="producto.destacado" (ngModelChange)="actualizarDestacado(producto.id, producto, $event)"></mat-checkbox>
                </td>
            </ng-container>

            <ng-container matColumnDef="detalles">
                <th mat-header-cell *matHeaderCellDef>Detalles</th>
                <td mat-cell *matCellDef="let producto">
                    <button mat-icon-button (click)="openModalDetalle(producto)">
                <mat-icon class="material-icons-outlined text-muted">remove_red_eye</mat-icon>
            </button>
                </td>
            </ng-container>

            <ng-container matColumnDef="editar">
                <th mat-header-cell *matHeaderCellDef>Editar</th>
                <td mat-cell *matCellDef="let producto">
                    <button mat-icon-button (click)="openModalEdit(producto)">
              <mat-icon class="material-icons-outlined text-muted">edit</mat-icon>
          </button>
                </td>
            </ng-container>

            <ng-container matColumnDef="eliminar">
                <th mat-header-cell *matHeaderCellDef>Eliminar</th>
                <td mat-cell *matCellDef="let producto">
                    <button mat-icon-button (click)="openModalDelete(producto)">
          <mat-icon class="material-icons-outlined text-muted">delete</mat-icon>
        </button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>

    <mat-paginator [pageSize]="20" [pageSizeOptions]="[20, 50, 100]" [showFirstLastButtons]="true">
    </mat-paginator>





</div>